import"./constants-D2DsSXG6.js";import{d as m,a as p}from"./constants-DNmD6dpJ.js";let l=document.getElementById("username"),s=document.getElementById("password"),y=document.querySelector(".login-form"),h=document.querySelectorAll(".message"),f=document.querySelector(".not-found"),g=document.querySelector(".not-active"),v=document.querySelector(".empty"),w=document.querySelector(".loading"),S=document.querySelector(".success"),q=document.querySelector(".error"),r=document.querySelector(".show-hide"),E=document.querySelector(".go-back");E.addEventListener("click",()=>{location.href="../index.html"});r.addEventListener("click",()=>{s.type==="password"?(s.type="text",r.className=r.className.replace("eye","eye-slash")):(s.type="password",r.className=r.className.replace("eye-slash","eye")),s.focus()});function j(){return{username:l.value,password:s.value}}function c(e){h.forEach(o=>{o.classList.remove("active")}),e.classList.add("active"),setTimeout(()=>{e.classList.remove("active")},5e3)}function n(){let e=Date.now(),o=e+2*60*60*1e3,t=e+7*24*60*60*1e3,a=new Date(o),i=new Date(t),u=a.toUTCString(),d=i.toUTCString();return[u,d]}y.addEventListener("submit",async e=>{if(e.preventDefault(),l.value.length===0||s.value.length===0)return c(v),!1;w.classList.add("active");let o=j(),t=await fetch(`${m}/${p}/auth/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(t.status==200){c(S);let a=await t.json();document.cookie=`access=${a.access}; expires=${n()[0]}; path=/`,document.cookie=`refresh=${a.refresh}; expires=${n()[1]}; path=/`,location.href="../home/home.html"}else t.status==401?(await t.json()).detail==="Account is not active"?c(g):c(f):c(q)});

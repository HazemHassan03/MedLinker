import"./constants-D2DsSXG6.js";import"./header-BX0fN-_f.js";import{c as T,f as B,b as k,e as d,l as C,d as _,a as x,g as Q,s as D}from"./constants-DNmD6dpJ.js";let $=await T(),F=document.querySelector(".post-job");if($===!0){if((await B()).user.user_type==="company")await J();else{F.remove();let a=document.createElement("p");a.classList.add("forbidden");let s=document.createElement("div");s.classList.add("container"),s.append(document.createTextNode("You do not have permission to access this page.")),a.append(s),document.body.append(a)}k()}let N=document.querySelector(".go-back");N.addEventListener("click",()=>{location.href="../home/home.html"});async function J(){let u=document.querySelector(".post-job-form"),m=document.querySelector(".post-job-form .interview-questions"),a=document.querySelector(".question-row .add"),s,l=[...document.querySelectorAll(".post-job-form input:not([type=submit])"),...document.querySelectorAll(".post-job-form select"),...document.querySelectorAll(".post-job-form textarea")],p=1;function A(){p++;let e=`<div class="question-row">
              <div class="question">
                <input
                  type="text"
                  name="interview-questions"
                  data-type="question"
                  id="question${p}"
                  placeholder="Add Question"
                  />
                  <input
                  type="text"
                  name="interview-questions"
                  data-type="answer"
                  id="answer${p}"
                  placeholder="Add Answer"
                />
              </div>
              <i class="remove fa-solid fa-circle-minus"></i>
            </div>`;m.insertAdjacentHTML("beforeend",e),l=[...document.querySelectorAll(".post-job-form input:not([type=submit])"),...document.querySelectorAll(".post-job-form select"),...document.querySelectorAll(".post-job-form textarea")],s=u.querySelectorAll(".question-row .remove"),s.forEach(t=>{t.addEventListener("click",()=>{t.parentElement.remove(),l=[...document.querySelectorAll(".post-job-form input:not([type=submit])"),...document.querySelectorAll(".post-job-form select"),...document.querySelectorAll(".post-job-form textarea")];let n=[];u.querySelectorAll(".question-row input").forEach(r=>{let i={input:r,name:r.id};i.check=r.value.length>0,n.push(i)});let c=[];for(let r of n)c.push(r.check);c.every(r=>r===!0)&&m.querySelector(".not-valid").classList.remove("active")})}),l=[...document.querySelectorAll(".post-job-form input:not([type=submit])"),...document.querySelectorAll(".post-job-form select"),...document.querySelectorAll(".post-job-form textarea")]}a.addEventListener("click",A);function S(){let e,t,n,o,c,f,r,i,v,q;e=document.getElementById("job-title"),t=document.getElementById("employment-type"),n=document.getElementById("job-type"),o=document.getElementById("workplace"),c=document.getElementById("job-location-country"),f=document.getElementById("job-location-city"),r=document.getElementById("job-description"),i=document.getElementById("job-requirements"),v=document.getElementById("vacancies"),q=document.querySelectorAll(".post-job-form .question-row");let y;o.value==="On-site"?y="onsite":y=o.value;let w=[];return q.forEach(j=>{let L=j.querySelector("[data-type=question]").value.trim(),I=j.querySelector("[data-type=answer]").value.trim();w.push({question:L,answer:I})}),{title:e.value.trim(),position_type:t.value.toLowerCase(),job_type:n.value.toLowerCase(),work_place:y.toLowerCase(),location_country:c.value.trim(),location_city:f.value.trim(),description:r.value.trim(),requirements:i.value.trim(),number_of_vacancies:v.value,interview_questions:w}}function g(e){let t={input:e,name:e.name};return e.type==="text"||e.tagName==="TEXTAREA"?e.value.length>0?t.result=!0:t.result=!1:e.type==="number"?e.value>0?t.result=!0:t.result=!1:e.tagName==="SELECT"&&(e.value==0?t.result=!1:t.result=!0),t}function h(e){let t=[];return e.forEach(o=>{t.push(g(o))}),t.some(o=>o.result===!1)?t:!0}function E(e){let t=h(e),n=[];for(let o of t)o.result===!1&&n.push(o.input);n.forEach(o=>{document.querySelector(`.post-job-form .${o.name} .not-valid`).classList.add("active"),o.addEventListener("input",()=>{document.querySelector(`.post-job-form .${o.name} .not-valid`).classList.remove("active")})})}async function b(){C();let e=await fetch(`${_}/${x}/company/me/jobs`,{method:"POST",headers:{Authorization:`Bearer ${await Q()}`,"Content-Type":"application/json"},body:JSON.stringify(S())});k(),e.status==201?d("success",void 0,"The job has been successfully posted","Thank you for using MedLinker. We will work hard to find the best candidates suitable for this job.",void 0,void 0,"../home/home.html"):e.status==401?await D()===!0?await b():d("failed",void 0,"Something went wrong","We're sorry about that. Please try again."):d("failed",void 0,"Something went wrong","We're sorry about that. Please try again.")}u.addEventListener("submit",async e=>{e.preventDefault(),h(l)===!0?await b():(d("failed",void 0,"Incomplete data","Please ensure that you have entered all the required information."),E(l))})}
